"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.chart = void 0;
const shared_1 = require("@vuepress/shared");
const utils_1 = require("@vuepress/utils");
const chart = (md) => {
    const temp = md.renderer.rules.fence.bind(md.renderer.rules);
    md.renderer.rules.fence = (tokens, index, options, env, slf) => {
        const token = tokens[index];
        if (token.info.trim() === "chart") {
            try {
                const key = `chart_${(0, utils_1.hash)(index)}`;
                const content = (0, shared_1.htmlEscape)(token.content.trim());
                return `<Chart id="${key}" data-code="${content}"></Chart>`;
            }
            catch (err) {
                return `<pre>${err}</pre>`;
            }
        }
        return temp(tokens, index, options, env, slf);
    };
};
exports.chart = chart;
